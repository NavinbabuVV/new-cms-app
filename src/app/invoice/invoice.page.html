<ion-header no-shadow>
	<ion-toolbar align-title="center" class="header" color="primary">
		<ion-buttons slot="start">
			<ion-back-button (click)="goToTestPage()"></ion-back-button>
		</ion-buttons>
		<ion-title>Invoice</ion-title>
		<ion-buttons slot="end">
			<ion-menu-button></ion-menu-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>


<ion-content class="backpagebg">
	<!-- <app-example></app-example> -->
	<ion-segment color="dark" (ionChange)="segmentChanged($event)" value="unpaid">
		<ion-segment-button value="paid">
			<ion-label>Paid</ion-label>
		</ion-segment-button>
		<ion-segment-button value="unpaid">
			<ion-label>Unpaid</ion-label>
		</ion-segment-button>
		<ion-segment-button value="pro">
			<ion-label>Profroma</ion-label>
		</ion-segment-button>
	</ion-segment>


	<div *ngIf="nodata" class="aligncenter">
		<img src="../../assets/imgs/norecord-new.png">
		<p>No Invoice Found</p>
	</div>


	<div *ngIf="isdata">
		<!-- <app-terms slot="fixed"></app-terms> -->
		<div *ngFor="let l of invoice">

			<ion-card class="cardbg">
				<ion-card-content [ngClass]="(infinite_value == 'paid')?'color-green':'color-red'">
					<ion-checkbox slot="end"  [(ngModel)]="foo" (ionChange)="selected($event,l.billId,l.currency_name)"></ion-checkbox>
					<ion-grid class="ion-no-padding" style="font-size: 14px;">
						<ion-row class="">
							<ion-col class="table-col" size="5">
								Invoice No:
							</ion-col>
							<ion-col class="table_key" size="6">
								<strong>{{l.cus_invoice_no}}</strong>
							</ion-col>
						</ion-row>

						<ion-row class="">
							<ion-col class="table-col" size="5">
								Date:
							</ion-col>
							<ion-col class="table_key" size="6">
								<strong>{{l.date}}</strong>
							</ion-col>
						</ion-row>

						<!-- <ion-row>
							<ion-col size="6">
								<p>Invoice No: </p>
								<p><strong>{{l.cus_invoice_no}}</strong></p>
								<p><strong>{{l.billerCode}}</strong></p>
							</ion-col>
							<ion-col size="6">
								<p>Date:</p>
								<p><strong>{{l.date}}</strong></p>

							</ion-col>

						</ion-row> -->

						<ion-row class="">
							<ion-col class="table-col" size="5">
								Description:
							</ion-col>
							<ion-col class="table_key" size="6">
								<strong>{{l.description}}</strong>
							</ion-col>
						</ion-row>

						<!-- <ion-row>
							<ion-col size="12">
								<p>Description:</p>
								<p><strong>{{l.description}}</strong></p>
							</ion-col>

						</ion-row> -->

						<ion-row class="">
							<ion-col class="table-col" size="5">
								Total:
							</ion-col>
							<ion-col class="table_key" size="6">
								<strong>{{l.total}}</strong>
							</ion-col>
						</ion-row>

						<ion-row class="">
							<ion-col class="table-col" size="5">
								Generated By:
							</ion-col>
							<ion-col class="table_key" size="6">
								<strong>{{l.generatedby}}</strong>
							</ion-col>
						</ion-row>


						<!-- <ion-row>
							<ion-col size="6">
								<p>Total:</p>
								<p><strong>{{l.total}}</strong></p>
							</ion-col>
							<ion-col size="6">
								<p>Generated By:</p>
								<p><strong>{{l.generatedby}}</strong></p>

							</ion-col>
						</ion-row> -->



						<!-- <ion-row>
							<ion-col size="6">
								<p>Inv Type(Aging)</p>
								<p><strong>{{l.invoice_type}}</strong></p>
							</ion-col>
							<ion-col size="6">
								<p>Curr Det:</p>
								<p><strong>{{l.currency_name}} {{l.conversionRate}}</strong></p>

							</ion-col>
						</ion-row> -->

						<ion-row>
							<ion-col size="12">
								<p>Action:</p>
								<div class="action">

									<img (click)="openWithSystemBrowser(l.invoice_attach)" style="    background: white;
									border-radius: 50px;
									padding: 4px;"
										src="assets/imgs/pdf.png" />

									<!-- <img (click)="openWithInAppBrowser(l.invoice_attach)" style="" src="assets/imgs/pdf.png"/> -->
									<img (click)="openWithSystemBrowser(l.paymentBillLink)" style="    background:white;
									border-radius: 50px;
									padding: 4px;"
										src="assets/imgs/pay.png" />

									<!-- <a target="_blank" href="{{l.payment_link}}"><img style="" src="assets/imgs/pay.png"/></a> -->
									<img *ngFor="let z of l.license_attach" (click)="openWithSystemBrowser(z)" style="    background:white;
									border-radius: 50px;
									padding: 4px;"
										src="assets/imgs/key.png" />
								</div>


							</ion-col>
						</ion-row>
					</ion-grid>



				</ion-card-content>
			</ion-card>
		</div>
	</div>

	<ion-fab vertical="bottom" horizontal="end" slot="fixed" *ngIf="infinite_value == 'unpaid'">
		<!-- <ion-fab-button>
		</ion-fab-button> -->
		<ion-button class="payment_color" (click)="paymentlink()">
			<div style="font-size: 18px;font-weight: bold;">
			  <!-- <ion-icon name="star"></ion-icon> -->
			  $ {{selectedbill_values}}
			</div>
		  </ion-button>
		<!-- <ion-button><ion-icon name="add"></ion-icon>Pay Now</ion-button> -->
	</ion-fab>

	<ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
		<ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
		</ion-infinite-scroll-content>
	</ion-infinite-scroll>

</ion-content>